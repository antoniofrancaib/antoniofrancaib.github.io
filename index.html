<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Antonio Franca</title>
    <link rel="icon" type="image/png" href="./assets/images/favicon.png">
    <style>
        /* Minimal Design CSS - Inspired by clean, single-page aesthetics */

        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            font-size: 16px;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* CSS Custom Properties for Theming */
        body {
            /* Light theme (default) */
            --bg-primary: #FAFAFA;
            --bg-secondary: #fff;
            --bg-tertiary: #fafafa;
            --text-primary: #000;
            --text-secondary: #333;
            --text-tertiary: #666;
            --text-muted: #999;
            --text-faint: #888;
            --border-color: #f0f0f0;
            --border-color-medium: #e0e0e0;
            --border-color-strong: #ddd;
            --border-color-subtle: #ccc;
            --link-color: #000;
            --success-color: #28a745;
            --error-color: #dc3545;
            --info-color: #007bff;
        }

        /* Dark theme */
        body[data-theme="dark"] {
            --bg-primary: #1a1a1a;
            --bg-secondary: #1f1f1f;
            --bg-tertiary: #1a1a1a;
            --text-primary: #f5f5f5;
            --text-secondary: #e0e0e0;
            --text-tertiary: #b0b0b0;
            --text-muted: #808080;
            --text-faint: #707070;
            --border-color: #2a2a2a;
            --border-color-medium: #333;
            --border-color-strong: #3a3a3a;
            --border-color-subtle: #444;
            --link-color: #f5f5f5;
            --success-color: #4ade80;
            --error-color: #f87171;
            --info-color: #60a5fa;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            color: var(--text-primary);
            background-color: var(--bg-primary);
            font-weight: 400;
            font-size: 17px;
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        /* Links */
        a { 
            color: var(--link-color); 
            text-decoration: none; 
            transition: opacity 0.2s ease, color 0.3s ease; 
        }
        a:hover { opacity: 0.6; text-decoration: none; }

        /* Page container */
        .page-container {
            max-width: none;
            margin: 0;
            padding: 24px;
        }

        /* Update site title */
        .site-title {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            font-size: 15px;
            font-weight: 400;
            margin: 0 0 60px 0;
            text-align: left;
            border: none !important;
            border-bottom: none !important;
            box-shadow: none !important;
            color: var(--text-primary);
            transition: color 0.3s ease;
        }

        .site-header {
            border: none !important;
            border-bottom: none !important;
            box-shadow: none !important;
        }

        /* Remove any unwanted lines/borders globally */
        header, h1, h2, h3, h4, h5, h6 {
            border: none !important;
            border-bottom: none !important;
            box-shadow: none !important;
        }

        /* Two-column layout for sections */
        .about-section,
        .work-section,
        .notes-section,
        .contact-section {
            display: grid;
            grid-template-columns: 1fr 3fr 1fr;
            margin-bottom: 80px;
            align-items: flex-start;
            gap: 40px;
        }

        .about-section:first-of-type {
            margin-top: 0;
        }

        .section-label {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            font-size: 15px;
            font-weight: 400;
            color: var(--text-muted);
            grid-column: 1;
            margin: 0;
            text-align: left;
            padding-left: 0;
            transition: color 0.3s ease;
        }

        .section-content {
            grid-column: 2;
            max-width: none;
        }

        .section-subtitle {
            font-size: 0.95rem;
            color: var(--text-faint);
            margin-bottom: 32px;
            font-style: italic;
            transition: color 0.3s ease;
        }

        /* Section content styles */
        .section-content p {
            margin-bottom: 20px;
            line-height: 1.6;
            color: var(--text-secondary);
            transition: color 0.3s ease;
        }

        .section-content p:last-child {
            margin-bottom: 0;
        }

        /* Work section */
        .work-list { margin-bottom: 32px; }
        .work-item { 
            margin-bottom: 40px; 
            border-bottom: 1px solid var(--border-color); 
            padding-bottom: 32px; 
            transition: border-color 0.3s ease;
        }
        .work-item:last-child { border-bottom: none; padding-bottom: 0; margin-bottom: 0; }
        .work-item h3 { 
            font-size: 1.1rem; 
            font-weight: 500; 
            margin-bottom: 8px; 
            color: var(--text-primary); 
            line-height: 1.4;
            transition: color 0.3s ease;
        }
        .work-item p { 
            color: var(--text-tertiary); 
            line-height: 1.6; 
            margin-bottom: 12px;
            transition: color 0.3s ease;
        }
        .work-link, .view-all-link { 
            color: var(--link-color); 
            text-decoration: none; 
            font-size: 15px; 
            transition: opacity 0.2s ease, color 0.3s ease; 
        }
        .work-link:hover, .view-all-link:hover { opacity: 0.6; text-decoration: none; }
        .work-status { 
            color: var(--text-muted); 
            font-size: 13px; 
            font-style: italic;
            transition: color 0.3s ease;
        }
        .view-all-link { display: inline-block; margin-top: 20px; }

        /* Post rows (date + content) */
        .post-row { display: grid; grid-template-columns: 100px 1fr; gap: 16px; margin-bottom: 24px; }
        .post-row .date { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            color: var(--text-muted); 
            font-size: 13px; 
            font-weight: 400;
            white-space: nowrap;
            transition: color 0.3s ease;
        }

        /* Notes section */
        .notes-list { margin-bottom: 32px; }
        .note-item { display: flex; margin-bottom: 24px; align-items: flex-start; gap: 20px; }
        .note-item:last-child { margin-bottom: 0; }
        .note-date { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            font-size: 13px; 
            color: var(--text-muted); 
            font-weight: 400;
            min-width: 100px;
            transition: color 0.3s ease;
        }
        .note-content h3 { 
            font-size: 1rem; 
            font-weight: 400; 
            margin-bottom: 0; 
            line-height: 1.6;
            color: var(--text-primary);
            transition: color 0.3s ease;
        }
        .note-content h3 span {
            font-weight: 400;
            color: var(--text-primary);
            transition: color 0.3s ease;
        }
        .note-content h3 strong {
            font-weight: 500;
            color: var(--text-primary);
            transition: color 0.3s ease;
        }
        .note-content h3 a { 
            color: var(--link-color); 
            text-decoration: none; 
            transition: opacity 0.2s ease, color 0.3s ease; 
        }
        .note-content h3 a:hover { opacity: 0.6; }
        .note-content p { 
            color: var(--text-tertiary); 
            font-size: 0.95rem; 
            line-height: 1.5;
            transition: color 0.3s ease;
        }

        /* Contact section */
        .contact-list { margin-bottom: 60px; }
        .contact-item { display: flex; margin-bottom: 12px; align-items: baseline; }
        .contact-item:last-child { margin-bottom: 0; }
        .contact-label { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            font-size: 13px; 
            color: var(--text-muted); 
            font-weight: 400;
            min-width: 80px; 
            margin-right: 20px;
            transition: color 0.3s ease;
        }
        .contact-item a { 
            color: var(--link-color); 
            text-decoration: none; 
            font-size: 0.95rem; 
            transition: opacity 0.2s ease, color 0.3s ease; 
        }
        .contact-item a:hover { opacity: 0.6; }

        /* Spotify */
        .contact-item .stack { display: grid; gap: 6px }
        .spotify-now { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
            color: var(--text-muted); 
            font-size: 13px;
            font-weight: 400;
            transition: color 0.3s ease;
        }

        /* Project titles as links */
        .post-row .excerpt a{ 
            color: inherit; 
            text-decoration: none; 
            transition: opacity 0.2s ease, color 0.3s ease; 
        }
        .post-row .excerpt a:hover{ opacity: 0.6; text-decoration: none; }

        /* Footer */
        .footer-note { padding-top: 24px; margin-top: 24px; }
        .footer-note p { 
            color: var(--text-muted); 
            font-size: 0.9rem; 
            line-height: 1.5; 
            margin-bottom: 8px;
            transition: color 0.3s ease;
        }
        .footer-note p:last-child { margin-bottom: 0; }
        .footer-credit { font-style: italic; }

        /* Quotes */
        .site-quote { margin-top: 12px; margin-bottom: 60px; padding-left: 24px; }
        .site-quote-line { 
            color: var(--text-tertiary); 
            font-style: italic;
            transition: color 0.3s ease;
        }
        .site-quote-action { 
            color: var(--text-faint); 
            text-decoration: none; 
            margin-left: 24px;
            transition: color 0.3s ease;
        }
        .site-quote-action:hover { opacity: 0.6; text-decoration: none; }

        /* Guestbook */
        .guestbook-section { margin-top: 32px; }
        .guestbook-intro { 
            color: var(--text-secondary); 
            margin-bottom: 24px;
            transition: color 0.3s ease;
        }
        .guestbook-form { max-width: 600px; }
        .guestbook-input-container { 
            position: relative; 
            border: 1px solid var(--border-color-medium); 
            border-radius: 4px; 
            background: var(--bg-tertiary); 
            display: flex; 
            align-items: center;
            transition: border-color 0.3s ease, background-color 0.3s ease;
        }
        .guestbook-input-container:focus-within { 
            border-color: var(--border-color-subtle); 
            background: var(--bg-secondary); 
        }
        .guestbook-input { 
            flex: 1; 
            padding: 12px; 
            border: none; 
            background: transparent; 
            font-family: inherit; 
            font-size: 14px; 
            outline: none;
            color: var(--text-primary);
            transition: color 0.3s ease;
        }
        .guestbook-input::placeholder {
            color: var(--text-muted);
            transition: color 0.3s ease;
        }
        .guestbook-submit { 
            background: none; 
            color: var(--text-muted); 
            border: none; 
            padding: 12px 16px; 
            cursor: not-allowed; 
            font-size: 14px; 
            transition: color 0.3s ease, opacity 0.2s ease; 
        }
        .guestbook-submit:not(:disabled) { 
            color: var(--text-primary); 
            cursor: pointer; 
        }
        .guestbook-submit:not(:disabled):hover { opacity: 0.7; }
        .guestbook-status { font-size: 14px; margin-top: 8px; }
        .guestbook-success { 
            color: var(--success-color);
            transition: color 0.3s ease;
        }
        .guestbook-error { 
            color: var(--error-color);
            transition: color 0.3s ease;
        }
        .guestbook-info { 
            color: var(--info-color);
            transition: color 0.3s ease;
        }

        /* Problem list */
        .problem-list { list-style: none; margin: 20px 0; padding: 0; }
        .problem-item { margin-bottom: 16px; position: relative; padding-left: 20px; }
        .problem-item::before { 
            content: "•"; 
            position: absolute; 
            left: 0; 
            color: var(--text-muted); 
            font-size: 1.2em; 
            line-height: 1.2;
            transition: color 0.3s ease;
        }
        .problem-title { 
            color: var(--text-primary); 
            cursor: pointer; 
            transition: opacity 0.2s ease, color 0.3s ease; 
            border-bottom: 1px dotted var(--text-muted); 
        }
        .problem-title:hover { opacity: 0.6; }
        .problem-note { 
            max-height: 0; 
            overflow: hidden; 
            transition: max-height 0.3s ease, padding 0.3s ease, color 0.3s ease, border-color 0.3s ease; 
            color: var(--text-tertiary); 
            font-style: italic; 
            line-height: 1.6; 
            padding: 0 0 0 16px; 
            margin-left: 8px;
            border-left: 2px solid var(--border-color);
        }
        .problem-note.expanded { 
            padding: 12px 0 12px 16px; 
            border-left-color: var(--border-color-strong);
        }
        .problem-note a {
            color: var(--link-color);
            text-decoration: underline;
            transition: opacity 0.2s ease, color 0.3s ease;
        }
        .problem-note a:hover {
            opacity: 0.6;
        }

        /* Remove underline from specific links */
        .section-content a:hover { text-decoration: none; }

        /* Responsive design */
        @media (max-width: 1000px) {
            .page-container { padding: 40px 24px; }
            .about-section, .work-section, .notes-section, .contact-section { 
                gap: 20px; 
            }
        }
        @media (max-width: 768px) {
            .page-container { max-width: 100%; padding: 40px 24px; }
            .site-title { font-size: 1.75rem; margin-bottom: 40px; }
            .about-section, .work-section, .notes-section, .contact-section { 
                display: flex; 
                flex-direction: column; 
                gap: 24px; 
                margin-bottom: 60px; 
            }
            .section-label { 
                min-width: auto; 
                text-align: left;
                padding-left: 0;
            }
            .note-item { flex-direction: column; gap: 8px; }
            .note-date { min-width: auto; }
            .contact-item { flex-direction: column; gap: 4px; margin-bottom: 16px; }
            .contact-label { min-width: auto; margin-right: 0; }
            .post-row { 
                display: flex; 
                flex-direction: column; 
                gap: 8px; 
            }
            .post-row .date { 
                order: -1; 
                margin-bottom: 4px; 
            }
        }
        @media (min-width: 1400px) {
            .about-section, .work-section, .notes-section, .contact-section { gap: 60px; }
        }
    </style>
</head>
<body>
<div class="page-container">
    <!-- Header/Name Section -->
    <header class="site-header">
        <h1 class="site-title">Antonio Franca</h1>
    </header>

    <!-- About Section -->
    <section class="about-section">
        <h2 class="section-label">About</h2>
        <div class="section-content">

            <p>I'm an AI researcher working at the intersection of generative modeling, geometric deep learning, and molecular design. I build models that inverse-design molecules (proteins, drugs, materials) by learning to navigate high-dimensional chemical and biological spaces. I also do freelance engineering consulting. I hold an MPhil in Machine Learning from Cambridge (Distinction) and a BSc in Mathematics from VU Amsterdam (Cum Laude).</p>
            
            <p>Some problems I find interesting:</p>
            
            <ul class="problem-list">
                <li class="problem-item">
                    <span class="problem-title" data-note="data-distributions">Modeling and sampling arbitrary data distributions</span>
                    <div class="problem-note" id="note-data-distributions">Generative modeling represents one of the most ambitious frontiers in AI. At its limit, it would enable generating anything on demand (images, video, proteins, molecular therapeutics) initially in simulation (bits), later translated to physical reality (atoms) through printer-like tech. I find this problem one of the most exciting ones because it can be hugely impactful and it is often mathematically elegant (think transport maps via diffusion or flows with strong physics inductive biases, and other clever sampling methods to overcome the curse of dimensionality, rather than just autoregressive models that work via scaling deep learning architectures).<br><br></div>
                </li>
                <li class="problem-item">
                    <span class="problem-title" data-note="ai-science">How can we leverage AI to accelerate science</span>
                    <div class="problem-note" id="note-ai-science">I see two main paths towards AI-accelerated science:<br><br><strong>Foundation models for science.</strong> In a world where scaling laws work, language was the low-hanging fruit (i.e. internet text made LLMs feasible). Now it is the time to apply the same playbook to data-scarce domains (genomes, molecules, proteins, materials), and build foundation models that do for biology and chemistry what GPT did for language.<br><br><strong>Agentic exploration of the hypothesis space.</strong> Einstein once supposedly said genius is 1% talent and 99% hard work. Suppose an autonomous agent that can take a high-level idea and then actually code, run experiments, debug, analyse results, scan research literature, and suggest what to try next. Even crazier, tie this with embodied AI, and it can even run wet lab experiments. Though I don't think we'll get fully autonomous researchers anytime soon, what's way more realistic in the near term are tireless research assistants that amplify the impact of a sharp PI who guides them appropriately. We're already seeing early sparks of this (see <a href="https://arxiv.org/pdf/2507.18074" target="_blank">research paper</a>, <a href="https://platform.futurehouse.org/" target="_blank">AI scientist startup</a>).<br><br></div>
                </li>
                <li class="problem-item">
                    <span class="problem-title" data-note="verifiable-rewards">How we can leverage verifiable rewards to unlock RL at scale</span>
                    <div class="problem-note" id="note-verifiable-rewards">The <em><a href="https://www.jasonwei.net/blog/asymmetry-of-verification-and-verifiers-law" target="_blank">verifier's rule</a></em> states that the ease of training AI to solve a task is proportional to how verifiable the task is. This asymmetry (where verification is orders of magnitude easier than generation) is becoming one of the most powerful levers in AI. Think: Sudoku takes minutes to solve but seconds to verify; Instagram took years to build but anyone can check if it works; complex proofs are hard to discover but (relatively) straightforward to validate. What excites me: we're entering an era where any problem with <strong>objective truth</strong>, <strong>fast verification</strong>, and <strong>scalable feedback</strong> becomes tractable.<br><br></div>
                </li>
                <li class="problem-item">
                    <span class="problem-title" data-note="computational-intelligence">What are the computational principles of intelligence</span>
                    <div class="problem-note" id="note-computational-intelligence">What does it take to explain abstraction, reasoning, even consciousness, in computational terms? Given neurons and synapses give rise to human-level cognition, what are the universal principles we need to capture to develop algorithms capable of autonomous abstraction (i.e. general intelligence).<br><br></div>
                </li>
                <li class="problem-item">
                    <span class="problem-title" data-note="human-biology">How can we engineer human biology</span>
                    <div class="problem-note" id="note-human-biology">Think of designing interventions to repair and improve our bodies, and monitor these satisfactorily once they are implemented. At the limit of <a href="https://pubmed.ncbi.nlm.nih.gov/26940610/" target="_blank">medicine 3.0</a>, I imagine nanorobots circulating through our bloodstream, constantly tracking cellular function and flagging risks before they become problems. These might interface with AI doctors capable of proposing personalized therapies (e.g. some of them drugs generated on demand). Building the hardware–software infrastructure for this will be <em>hard</em>, but so was sending humans to the Moon.<br><br></div>
                </li>
                <li class="problem-item">
                    <span class="problem-title" data-note="geopolitical-governance">How to redesign geopolitical governance to avoid wars, and promote economic prosperity</span>
                    <div class="problem-note" id="note-geopolitical-governance">The Westphalian system of nation-states creates perverse incentives: wars emerge not from irrationality but from misaligned structures where conflict can be profitable. The question isn't "how do we find better leaders?" but "how do we design systems where rational actors can't profit from conflict?". Real progress requires mechanisms over mandates: network states that enable governance-as-a-service, forcing institutions to compete for citizens; asymmetric economic interdependence where warfare becomes suicidal for all parties; and algorithmic institutions (smart contracts, prediction markets, executable policy) that replace opacity with legibility. The uncomfortable truth is achieving this demands either voluntary adoption by existing powers (unlikely) or parallel institution-building that gradually outcompetes legacy systems (generational).<br><br></div>
                </li>
            </ul>
            
            <p>I'm based in London, where it's currently <span data-london-time>00:00:00</span>.</p>
            
            <p>In my spare time, I run, swim, surf, lift, explore nature, eat, code, travel, and read.</p>
        </div>
    </section>

    <!-- Projects Section -->
    <section class="work-section">
        <h2 class="section-label">Projects</h2>
        <div class="section-content">
            <div class="projects-list">
                <div class="post-row">
                    <div class="date">2025 08</div>
                    <div class="excerpt"><strong><a href="https://github.com/antoniofrancaib/accelerate-md" target="_blank">Accelerating molecular sampling</a></strong> (<a href="../assets/Franca_Transferable_2025.pdf" target="_blank">report</a>) Using generative models to speed up parallel tempering by learning transports between Boltzmann distributions.</div>
                </div>

                <div class="post-row">
                    <div class="date">2025 06</div>
                    <div class="excerpt"><strong><a href="https://github.com/antoniofrancaib/grnadex" target="_blank">RNA design models</a> </strong> (<a href="../assets/grnadex.pdf" target="_blank">preprint</a>) Improving RNA inverse folding with greater expressivity and biologically inspired priors (an enhanced <a href="https://arxiv.org/pdf/2305.14749" target="_blank">gRNAde</a>).</div>
                </div>

                <div class="post-row">
                    <div class="date">2024 08</div>
                    <div class="excerpt"><strong><a href="https://github.com/antoniofrancaib/quenched-variability" target="_blank"> Memory in recurrent networks</a></strong> (<a href="../assets/quenched-variability-role.pdf" target="_blank">report</a>) Exploring how “quenched variability” in neural connectivity can expand memory storage capacity.</div>
                </div>
            </div>
            <a href="projects/" class="view-all-link">View all projects →</a>
        </div>
    </section>

    <!-- Notes Section -->
    <section class="notes-section">
        <h2 class="section-label">Notes</h2>
        <div class="section-content">
            <div class="notes-list">
                <div class="note-item">
                    <span class="note-date">Fri, 28 Aug</span>
                    <div class="note-content">
                        <h3><span style="cursor: default;">The world is a messy place, full of contradictions and noise. Before science, we lean on observation and intuition. These notes gather some of my contrarian beliefs.</span></h3>
                    </div>
                </div>
                <div class="note-item">
                    <span class="note-date">Fri, 21 Jul</span>
                    <div class="note-content">
                        <h3><span style="cursor: default;">The best way to predict the future is to think about desire. The problem with desire is that it tends to be bounded by what’s actually possible. But who cares about what is reasonable?</span></h3>
                    </div>
                </div>
            </div>
            
            <span class="view-all-link" style="cursor: default; opacity: 0.6;">View all notes →</span>
        </div>
    </section>

    <!-- Posts Section -->
    <section class="notes-section">
        <h2 class="section-label">Posts</h2>
        <div class="section-content">
            <div class="notes-list">
                <div class="note-item">
                    <span class="note-date">2025 07</span>
                    <div class="note-content">
                        <h3><span style="cursor: default;"><strong>How diffusion works.</strong> Notes on how I came to understand Diffusion Models.</span></h3>
                    </div>
                </div>
            </div>
            
            <span class="view-all-link" style="cursor: default; opacity: 0.6;">View all posts →</span>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact-section">
        <h2 class="section-label">Contact</h2>
        <div class="section-content">
            <div class="contact-list">
                <div class="contact-item">
                    <span class="contact-label">Email</span>
                    <a href="mailto:antoniofrancaib@gmail.com">antoniofrancaib@gmail.com</a>
                </div>
                
                <div class="contact-item">
                    <span class="contact-label">LinkedIn</span>
                    <a href="https://www.linkedin.com/in/antonio-franca-ibáñez-a37623198/" target="_blank">antonio-franca-ibáñez</a>
                </div>
                
                <div class="contact-item">
                    <span class="contact-label">X</span>
                    <a href="https://x.com/antoniofrancaib" target="_blank">antoniofrancaib</a>
                </div>
                
                <div class="contact-item">
                    <span class="contact-label">GitHub</span>
                    <a href="https://github.com/antoniofrancaib" target="_blank">antoniofrancaib</a>
                </div>

                <div class="contact-item">
                    <span class="contact-label">Spotify</span>
                    <div class="stack">
                        <a href="https://open.spotify.com/user/zn3zy8b7ozcxhuvz7y6sxpu4j?si=7d4693bc414245ce" target="_blank">antoniofranca</a>
                        <div class="spotify-now" data-spotify-now></div>
                    </div>
                </div>
            </div>
            
            <div class="guestbook-section">
                <p class="guestbook-intro">Leave a message in my guestbook.</p>
                <form class="guestbook-form" id="guestbook-form">
                    <div class="guestbook-input-container">
                        <input type="text" class="guestbook-input" id="guestbook-message" placeholder="Message" required maxlength="500">
                        <button type="submit" class="guestbook-submit" disabled>Send</button>
                    </div>
                    <div class="guestbook-status" id="guestbook-status"></div>
                </form>
                <!-- Hidden Google Form iframe for backup submission -->
                <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;" onload=""></iframe>
            </div>
        </div>
    </section>
</div> 
    <div id="site-quote" class="site-quote" hidden>
        <p class="site-quote-line"><span data-quote-full></span><a href="#" class="site-quote-action" data-quote-next>View another</a></p>
    </div>
    <script>
        // Time-based theme switching (6am-6pm = light, 6pm-6am = dark)
        (function(){
          function applyTheme(){
            const hour = new Date().getHours();
            const isDark = hour < 6 || hour >= 18;
            document.body.setAttribute('data-theme', isDark ? 'dark' : 'light');
          }
          applyTheme();
          // Re-check every minute in case user keeps page open across time boundaries
          setInterval(applyTheme, 60000);
        })();

        // London time display
        (function(){
          function tick(el){
            const f=new Intl.DateTimeFormat([], {hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false,timeZone:'Europe/London'});
            const run=()=>{ el.textContent=f.format(new Date()); };
            run(); setInterval(run, 1000);
          }
          const el=document.querySelector('[data-london-time]');
          if(el) tick(el);
        })();

        // Spotify: show latest played track if access token present in config.json
        (async function(){
          try{
            const holder=document.querySelector('[data-spotify-now]');
            if(!holder) return;
            const cfgResp=await fetch('./config.json');
            const cfg=await cfgResp.json();
            const token=cfg && cfg.spotify && cfg.spotify.accessToken;
            if(!token){ holder.textContent=''; return; }
            const r=await fetch('https://api.spotify.com/v1/me/player/recently-played?limit=1',{
              headers:{ Authorization:'Bearer '+token }
            });
            if(!r.ok) throw new Error('Spotify API error');
            const data=await r.json();
            const item=(data.items&&data.items[0])||null;
            if(!item){ holder.textContent=''; return; }
            const name=item.track && item.track.name || '';
            const artist=item.track && item.track.artists && item.track.artists[0] && item.track.artists[0].name || '';
            const playedAt=item.played_at? new Date(item.played_at):null;
            const ago=(function(){ if(!playedAt) return ''; const d=Math.floor((Date.now()-playedAt.getTime())/1000); if(d<60) return d+'s ago'; const m=Math.floor(d/60); if(m<60) return m+'m ago'; const h=Math.floor(m/60); if(h<24) return h+'h ago'; const days=Math.floor(h/24); return days+'d ago'; })();
            holder.textContent='“'+name+'” by '+artist+(ago?('  '+ago):'');
          }catch(err){ /* silent */ }
        })();


        // Problem notes toggle
        (function(){
          const titles = document.querySelectorAll('.problem-title');
          titles.forEach(title => {
            title.addEventListener('click', function() {
              const noteId = 'note-' + this.getAttribute('data-note');
              const note = document.getElementById(noteId);
              if (!note) return;
              const willExpand = !note.classList.contains('expanded');
              note.classList.toggle('expanded');
              if (willExpand) {
                // Expand to full content height
                note.style.maxHeight = note.scrollHeight + 'px';
              } else {
                // Collapse smoothly
                note.style.maxHeight = '0px';
              }
            });
          });
        })();
    </script>
    <script src="./assets/js/quotes.js"></script>
    <script src="./assets/js/guestbook.js"></script>
</body>
</html> 